 –ì–ª–∞–≤–∞ 2: –ü–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ C++ –∏ Game Framework
–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ä–µ–∞–ª—å–Ω—ã–π Unreal Engine 5. –ï—Å–ª–∏ –≤—ã –¥–æ —Å–∏—Ö –ø–æ—Ä –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–ª–∏—Å—å Blueprints, –ø–æ—Ä–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ C++. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏—Ö–æ—Ç—å ‚Äì —ç—Ç–æ –∫–ª—é—á –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –≥–∏–±–∫–æ—Å—Ç–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º –≤ –≤–∏–∑—É–∞–ª—å–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–∏–Ω–≥–µ.

–ó–¥–µ—Å—å –º—ã —Ä–∞–∑–±–µ—Ä–µ–º:
‚úÖ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–≥—Ä–æ–≤–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ UE5
‚úÖ –ö–∞–∫ –ø–∏—Å–∞—Ç—å –∫–æ–¥ –Ω–∞ C++ –ø–æ–¥ Unreal
‚úÖ –°–æ–∑–¥–∞–¥–∏–º —Å–≤–æ–π –ø–µ—Ä–≤—ã–π Actor –∏ Pawn
‚úÖ –†–∞–∑–±–µ—Ä–µ–º, –∫–∞–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –æ–±—ä–µ–∫—Ç—ã –∏ –∫–ª–∞—Å—Å—ã

üìå –î–∏—Å–∫–ª–µ–π–º–µ—Ä: –ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –æ–ø—ã—Ç–∞ –≤ C++, –ø–æ—Ä–∞ –ø–æ–¥—Ç—è–Ω—É—Ç—å –µ–≥–æ. Unreal C++ ‚Äì —ç—Ç–æ –æ—Å–æ–±–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ —Å —É–º–Ω—ã–º–∏ —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏, –º–∞–∫—Ä–æ—Å–∞–º–∏ –∏ –æ–±—ä–µ–∫—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π UE.

üî• 2.1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Game Framework –≤ UE5
–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –ø–∏—Å–∞—Ç—å –∫–æ–¥, –¥–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏–≥—Ä–æ–≤–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞.

üîπ GameModeBase ‚Äì —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏–∫–æ–π —Ä–µ–∂–∏–º–∞ –∏–≥—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∂–∏–º "–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∞—è –±–∏—Ç–≤–∞" –∏–ª–∏ "–®—É—Ç–µ—Ä 5v5").
üîπ PlayerController ‚Äì –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥ –∏–≥—Ä–æ–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–≤–∏–∂–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã).
üîπ Pawn ‚Äì –∏–≥—Ä–æ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–æ–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏–≥—Ä–æ–∫ –∏–ª–∏ AI.
üîπ Character ‚Äì —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –≤–∏–¥ Pawn —Å –≥–æ—Ç–æ–≤—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –¥–ª—è –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è.
üîπ Actor ‚Äì –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ —Å—Ü–µ–Ω–µ.

üí° –í–∞–∂–Ω–æ: –í UE5 –µ—Å—Ç—å Garbage Collector (GC), –ø–æ—ç—Ç–æ–º—É –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ new –∏ delete. –†–∞–±–æ—Ç–∞–π—Ç–µ —á–µ—Ä–µ–∑ UObjects –∏ TSharedPtr / TWeakObjectPtr.

üîπ 2.2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ C++ Actor
1Ô∏è‚É£ –°–æ–∑–¥–∞–µ–º C++ –ö–ª–∞—Å—Å
–û—Ç–∫—Ä—ã–≤–∞–µ–º Unreal Editor ‚Üí Tools ‚Üí New C++ Class
–í—ã–±–∏—Ä–∞–µ–º Actor ‚Üí –ù–∞–∑–æ–≤–µ–º –µ–≥–æ MovingPlatform
–û—Ç–∫—Ä—ã–≤–∞–µ–º MovingPlatform.h –∏ MovingPlatform.cpp.
2Ô∏è‚É£ –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Static Mesh
üìå MovingPlatform.h

cpp
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Actor.h"
#include "MovingPlatform.generated.h"

UCLASS()
class MYPROJECT_API AMovingPlatform : public AActor
{
    GENERATED_BODY()

public:	
    AMovingPlatform();

protected:
    virtual void BeginPlay() override;

public:	
    virtual void Tick(float DeltaTime) override;

private:
    UPROPERTY(VisibleAnywhere)
    UStaticMeshComponent* Mesh;

    UPROPERTY(EditAnywhere)
    FVector Velocity = FVector(100, 0, 0);  // –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ –æ—Å–∏ X
};
üìå MovingPlatform.cpp

cpp
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
#include "MovingPlatform.h"

AMovingPlatform::AMovingPlatform()
{
    PrimaryActorTick.bCanEverTick = true;

    Mesh = CreateDefaultSubobject<UStaticMeshComponent>(TEXT("Mesh"));
    RootComponent = Mesh;
}

void AMovingPlatform::BeginPlay()
{
    Super::BeginPlay();
}

void AMovingPlatform::Tick(float DeltaTime)
{
    Super::Tick(DeltaTime);

    FVector NewLocation = GetActorLocation() + (Velocity * DeltaTime);
    SetActorLocation(NewLocation);
}
üìå –ß—Ç–æ —Ç—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?
‚úÖ –°–æ–∑–¥–∞–ª–∏ –∫–ª–∞—Å—Å AMovingPlatform, –∫–æ—Ç–æ—Ä—ã–π –¥–≤–∏–∂–µ—Ç—Å—è –ø–æ –æ—Å–∏ X.
‚úÖ –í Tick() –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É –¥–æ–±–∞–≤–ª—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ –∫ –ø–æ–∑–∏—Ü–∏–∏.
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º CreateDefaultSubobject –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Static Mesh (—ç—Ç–æ –æ–±—ä–µ–∫—Ç –≤ —Å—Ü–µ–Ω–µ).

‚ö† –í–∞–∂–Ω–æ: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ new. UE —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–º—è—Ç—å—é —Å–∞–º.

üîπ 2.3. –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –Ω–∞ C++ (Pawn)
–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–¥–∏–º C++ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ —Å –∫–∞–º–µ—Ä–æ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º.

üìå 1. –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π C++ –∫–ª–∞—Å—Å ‚Üí –í—ã–±–∏—Ä–∞–µ–º Pawn ‚Üí –ù–∞–∑—ã–≤–∞–µ–º MyPawn.

üìå MyPawn.h

cpp
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Pawn.h"
#include "MyPawn.generated.h"

UCLASS()
class MYPROJECT_API AMyPawn : public APawn
{
    GENERATED_BODY()

public:
    AMyPawn();

protected:
    virtual void BeginPlay() override;

public:
    virtual void Tick(float DeltaTime) override;
    virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;

private:
    UPROPERTY(VisibleAnywhere)
    UStaticMeshComponent* Mesh;

    UPROPERTY(VisibleAnywhere)
    class UCameraComponent* Camera;

    void MoveForward(float Value);
};
üìå MyPawn.cpp

cpp
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
#include "MyPawn.h"
#include "Camera/CameraComponent.h"

AMyPawn::AMyPawn()
{
    PrimaryActorTick.bCanEverTick = true;

    Mesh = CreateDefaultSubobject<UStaticMeshComponent>(TEXT("Mesh"));
    RootComponent = Mesh;

    Camera = CreateDefaultSubobject<UCameraComponent>(TEXT("Camera"));
    Camera->SetupAttachment(RootComponent);
}

void AMyPawn::BeginPlay()
{
    Super::BeginPlay();
}

void AMyPawn::Tick(float DeltaTime)
{
    Super::Tick(DeltaTime);
}

void AMyPawn::SetupPlayerInputComponent(UInputComponent* PlayerInputComponent)
{
    Super::SetupPlayerInputComponent(PlayerInputComponent);
    PlayerInputComponent->BindAxis("MoveForward", this, &AMyPawn::MoveForward);
}

void AMyPawn::MoveForward(float Value)
{
    if (Value != 0.0f)
    {
        FVector Forward = GetActorForwardVector();
        AddActorWorldOffset(Forward * Value * 100 * GetWorld()->GetDeltaSeconds(), true);
    }
}
üìå –ß—Ç–æ –º—ã —Å–¥–µ–ª–∞–ª–∏?
‚úÖ –î–æ–±–∞–≤–∏–ª–∏ Static Mesh –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.
‚úÖ –î–æ–±–∞–≤–∏–ª–∏ –∫–∞–º–µ—Ä—É (CameraComponent).
‚úÖ –ü—Ä–æ–ø–∏—Å–∞–ª–∏ –≤–≤–æ–¥: MoveForward() –¥–≤–∏–≥–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤–ø–µ—Ä–µ–¥ –ø–æ W/S.

–¢–µ–ø–µ—Ä—å –≤ Project Settings ‚Üí Input —Å–æ–∑–¥–∞–π—Ç–µ Axis Mapping:

MoveForward ‚Üí W = 1.0, S = -1.0.
üî• –¢–µ–ø–µ—Ä—å –Ω–∞—à Pawn –º–æ–∂–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–ø–µ—Ä–µ–¥ –∏ –Ω–∞–∑–∞–¥!

üî• 2.4. –†–∞–∑–±–æ—Ä —Ä–∞–±–æ—Ç—ã UObject –∏ Components
UObject ‚Äì —Å–µ—Ä–¥—Ü–µ UE5
–í—Å–µ –∫–ª–∞—Å—Å—ã UE5 –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç UObject –∏–ª–∏ AActor. –≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –¥–ª—è:
‚úî –ì–∞—Ä–±–∞–∂–µ-–∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ (GC)
‚úî –°–∏—Å—Ç–µ–º—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚úî –†–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –≤ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–µ

üí° –ü–†–ê–í–ò–õ–û:

–ï—Å–ª–∏ —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç ‚Üí —ç—Ç–æ UObject.
–ï—Å–ª–∏ —ç—Ç–æ —á—Ç–æ-—Ç–æ –Ω–∞ —Å—Ü–µ–Ω–µ ‚Üí —ç—Ç–æ AActor.
–ï—Å–ª–∏ —ç—Ç–æ —á–∞—Å—Ç—å –¥—Ä—É–≥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ ‚Üí —ç—Ç–æ UComponent.
–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
üîπ UObject ‚Äì –∫–ª–∞—Å—Å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, UInventory).
üîπ AActor ‚Äì –ø—Ä–µ–¥–º–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–æ–¥–æ–±—Ä–∞—Ç—å (AWeapon).
üîπ UComponent ‚Äì —á–∞—Å—Ç—å AActor (–Ω–∞–ø—Ä–∏–º–µ—Ä, UHealthComponent).

‚úÖ –í—ã–≤–æ–¥—ã –≥–ª–∞–≤—ã
üîπ –í—ã –∏–∑—É—á–∏–ª–∏ Game Framework UE5
üîπ –°–æ–∑–¥–∞–ª–∏ Actor –Ω–∞ C++
üîπ –ù–∞–ø–∏—Å–∞–ª–∏ Pawn —Å –¥–≤–∏–∂–µ–Ω–∏–µ–º
üîπ –†–∞–∑–æ–±—Ä–∞–ª–∏—Å—å –≤ UObject –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
